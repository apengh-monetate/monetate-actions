!function(){var e=mt.auth.getUserProfile().user.email;null!==e&&(emailAddress=document.getElementById("email"),emailAddress.value=e,emailAddress.type="hidden",emailAddress.parentNode.style.marginBottom="0");var t,o=document.querySelector("#_pendo-contact-form__body_"),n=document.querySelector("._pendo-contact-form_"),r=document.querySelector("._pendo-contact-form__submit_"),a=document.querySelector("._pendo-contact-form__notifications_"),c=document.querySelector(".section__contact-modal-close"),s=(document.querySelector(".section__contact-modal-back"),document.querySelector("._pendo-contact-form__success_")),d=(document.querySelector("._pendo-contact-form__fail_"),document.querySelector("._pendo-contact-form__drop-zone_")),l=document.querySelector("._pendo-contact-form__drop-zone-overlay_"),i=document.querySelector("._pendo-contact-form__dragover-block_"),u=document.querySelector("._pendo-contact-form__drop-zone-mask_"),m="file_input_"+Date.now(),p=document.querySelector("[data-pendo-drop-zone-input]"),_=document.querySelector("[data-pendo-drop-zone-trigger]"),f=document.querySelector('[name="uploads"]'),y=document.querySelector("._pendo-contact-form__drop-zone-text_"),v=document.querySelector("._pendo-contact-form__drop-zone-overlay__progress_"),g=document.querySelector("._pendo-contact-form__drop-zone-progress_"),h=document.querySelector("._pendo-contact-form__drop-zone-progress__fill_");p.setAttribute("id",m),_.setAttribute("for",m),t=function(){var e=pendo.Sizzle("#_pendo-contact-form__body_")[0];pendo._.some(e.classList,function(e){if("is-toggled"===e)return!0})?e.classList.remove("is-toggled"):e.classList.add("is-toggled")},pendo.Sizzle(".section__contact-toggle")[0].addEventListener("click",t),pendo.Sizzle(".section__contact-modal-close")[0].addEventListener("click",t),pendo.Sizzle(".section__contact-modal-back")[0].addEventListener("click",t);var k,b=!1,S=function(e){q();var t=e.length;for(k=0;k<e.length;k++){var o=e[k];let n=new FileReader;n.onload=function(e){fetch("https://monetateknowledge.zendesk.com/api/v2/uploads.json?filename="+escape(o.name),{method:"POST",headers:new Headers({"Content-Type":"application/binary"}),body:e.target.result}).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){if(!e.upload.token)throw e;var o=document.createElement("div");o.className="_pendo-contact-form__drop-zone-attachment_",o.dataset.dropZoneAttachmentId=e.upload.token,d.insertBefore(o,y);var n=document.createDocumentFragment();removeAttachment=document.createElement("button"),removeAttachment.className="_pendo-contact-form__drop-zone-remove-attachment_",removeAttachment.type="button",removeAttachment.innerHTML='<ts-icon class="ts_icon_times_circle">&times;</ts-icon>',attachmentPreview=document.createElement("img"),attachmentPreview.className="_pendo-contact-form__drop-zone-preview_",attachmentPreview.onload=function(){--t<=0&&(T(),L())},attachmentPreview.src=e.upload.attachment.content_url,n.appendChild(removeAttachment),n.appendChild(attachmentPreview),o.appendChild(n),removeAttachment.addEventListener("click",D,!1);var r=w();dropzoneToken=e.upload.token,r.push(dropzoneToken),f.value=r.join()}).catch(function(e){z("uploads")})},n.readAsArrayBuffer(o)}};n.addEventListener("submit",function(e){e.preventDefault(),r.disabled=!0,r.classList.add("is-submitting"),function(e){formData=new FormData(n);var t=formData.get("email"),o=formData.get("subject"),a=formData.get("body");fetch("https://monetateknowledge.zendesk.com/api/v2/requests.json",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({request:{subject:o,comment:{body:a,uploads:[formData.get("uploads")]},requester:{name:t,email:t}}})}).then(function(e){if(!e.ok)throw e;n.style.display="none",r.classList.remove("is-submitting"),s.style.display="block",setTimeout(function(){c.click()},3e3),setTimeout(function(){s.style.display="none",n.reset();for(var e=document.getElementsByClassName("_pendo-contact-form__drop-zone-attachment_");e[0];)e[0].parentNode.removeChild(e[0]);n.style.display="block"},3300)}).catch(function(e){z("submit")})}()}),o.ondragover=function(e){return d.classList.add("dragover"),l.style.display="block",i.style.display="block",u.style.display="block",e.dataTransfer.dropEffect="copy",e.preventDefault(),!1},u.ondragend=function(e){return d.classList.remove("dragover"),u.style.display="none",e.preventDefault(),!1},u.ondragleave=function(e){return d.classList.remove("dragover"),l.style.display="none",i.style.display="none",u.style.display="none",e.preventDefault(),!1},u.ondrop=function(e){return e.preventDefault(),b=!0,d.classList.remove("dragover"),u.style.display="none",i.style.display="none",files=e.target.files||e.dataTransfer.files,S(files),b=!1},_.onclick=function(e){e.preventDefault(),p.click()},p.onchange=function(){b||(l.style.display="block",i.style.display="none",S(this.files)),b=!1};var z=function(e){errorMessage=document.createElement("p"),errorMessage.id="_pendo-contact-form__notice__error_"+Date.now(),errorMessage.className="_pendo-contact-form__notice_ is-error","submit"===e?errorMessage.innerHTML="There was an error trying to submit your ticket. Please try again.":"uploads"===e&&(errorMessage.innerHTML="Sorry, something went wrong when we were uploading your attachment. Please try again, or submit your request without an attachment."),a.appendChild(errorMessage),setTimeout(function(){errorMessage.classList.add("error-fade-out"),setTimeout(function(){a.innerHTML=null},500)},5e3)},w=function(){var e=[];return f.value&&(e=f.value.split(",")),e},q=function(){v.style.display="block";var e=0,t=setInterval(function(){var o=100-e;h.style.strokeDashoffset=o,100===++e&&(clearInterval(t),uploadsDisplayCurrentStyle=v.currentStyle?v.currentStyle.display:getComputedStyle(v,null).display,"block"===uploadsDisplayCurrentStyle&&g.classList.add("_pendo-contact-form__drop-zone-progress__pulse_"))},50)},L=function(){h.style.strokeDashoffset=0,l.classList.add("_pendo-contact-form__fade-out_"),g.classList.remove("_pendo-contact-form__drop-zone-progress__pulse_"),setTimeout(function(){l.style.display="none",l.classList.remove("_pendo-contact-form__fade-out_"),v.style.display="none",h.style.strokeDashoffset=0},300)},D=function(){var e=w(),t=this.parentNode.dataset.dropZoneAttachmentId;!function(){if(index=e.indexOf(t),index>-1)e.splice(index,1),f.value=e.join()}(),this.parentNode.remove()},T=function(){var e=document.getElementById("_pendo-launcher-section__feature_");e.scrollHeight-e.clientHeight<=e.scrollTop+1||(e.scrollTop=e.scrollHeight-e.clientHeight)}}();