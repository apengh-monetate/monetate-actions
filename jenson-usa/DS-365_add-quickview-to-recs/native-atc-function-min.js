var t,r,e,u,n,o=this,i=dataLayer[0].itemNumber||"";for(window.monetateQ.push(["setPageType","product"]),window.monetateQ.push(["addProductDetails",[i]]),window.monetateQ.push(["trackData"]),r=this,(t=$("#btnAddToCart")).button("loading"),u=0,n=0;n<this.variantsData.length;n++)(this.variantsData[n].Size.Value===this.selectedSize||""===this.selectedSize)&&(this.variantsData[n].Color===this.selectedColor||""===this.selectedColor)&&(this.variantsData[n].SkuName===this.selectedName||""===this.selectedName||0===$("#NameSelect").length)&&(e=this.variantsData[n],u+=1);if(1!==u)return $("#error-message-add-to-cart").html("Please select an option"),r.addedToCartErrorElement.modal("show"),void t.button("reset");t.button("loading");var f=$("#qty").val(),s=e.Code,h={code:s,quantity:f};if(isNaN(f)||f<=0)return $("#error-message-add-to-cart").html("Please add a valid quantity"),r.addedToCartErrorElement.modal("show"),void t.button("reset");$.ajax(app.API.postOptions("cart","addToCart",h)).then(function(e){var t,r,a,l,d,s,n,c=o;if(e.success)if($("#addedProductSkuName").html(e.viewModel.skuName),$("#addedProductQty").html("Qty:&nbsp;"+e.viewModel.qty),$("#addedProductPrice").html("Price:&nbsp;"+e.viewModel.price),$("#addedProductTitle").html(e.viewModel.displayTitle),null!==e.viewModel.imageUrl?$("#addedProductImg").attr("src",e.viewModel.imageUrl):$("#addedProductImg").attr("src","/content/images/assets/noimg_gallery_main.jpg"),$("#addedProductTotalCount").html(e.viewModel.cartSummary.numberOfItems+"&nbsp;"+(e.viewModel.cartSummary.numberOfItems>1?"items":"item")),$("#addedProductTotal").html("CART SUBTOTAL:&nbsp;"+e.viewModel.cartSummary.cartSubtotal),$("#addedProductUrlLink").attr("href",e.viewModel.shoppingCartPageUrl),c.addedToCartElement.modal("show"),c.miniCartContainer.html(e.viewModel.cartSummary.numberOfItems),t=Cookies.get(brontoCartCookieName),r=(r=(r=$(".breadcrumb").text()).replace(/(\r\n|\n|\r)/gm," ").replace(/ {1,}/g," ").replace(/>>/g,">")).substr(0,r.length-(r.length-r.indexOf("Duro Mountain Presta Valve Tube")+3)).trim(),null==t)a={currency:$("#currencySelector").html().substr($("#currencySelector").html().indexOf("(")+1,$("#currencySelector").html().indexOf(")")-$("#currencySelector").html().indexOf("(")-1),subtotal:parseFloat(e.viewModel.cartSummary.cartSubtotal.replace(/[^\d.-]/g,"")),cartUrl:"https://www.jensonusa.com/cart",lineItems:[{sku:i+" "+$("#NameSelect").val(),name:e.viewModel.skuName,description:e.viewModel.displayTitle,category:r,other:"",unitPrice:parseFloat(e.viewModel.price.replace(/[^\d.-]/g,"")),quantity:e.viewModel.qty,totalPrice:parseFloat(e.viewModel.price.replace(/[^\d.-]/g,""))*e.viewModel.qty,imageUrl:"https://www.jensonusa.com/"+e.viewModel.imageUrl,productUrl:location.href}]},brontoCart=a,Cookies.set("brontoCart",a),0;else{for((l=JSON.parse(t)).currency=$("#currencySelector").html().substr($("#currencySelector").html().indexOf("(")+1,$("#currencySelector").html().indexOf(")")-$("#currencySelector").html().indexOf("(")-1),l.subtotal=parseFloat(e.viewModel.cartSummary.cartSubtotal.replace(/[^\d.-]/g,"")),d=!1,s=0;s<l.lineItems.length;s++)l.lineItems[s].sku===i+" "+$("#NameSelect").val()&&(d=!0,l.lineItems[s].quantity+=e.viewModel.qty);d||l.lineItems.push({sku:i+" "+$("#NameSelect").val(),name:e.viewModel.skuName,description:e.viewModel.displayTitle,category:r,other:"",unitPrice:parseFloat(e.viewModel.price.replace(/[^\d.-]/g,"")),quantity:e.viewModel.qty,totalPrice:parseFloat(e.viewModel.price.replace(/[^\d.-]/g,""))*e.viewModel.qty,imageUrl:"https://www.jensonusa.com/"+e.viewModel.imageUrl,productUrl:location.href}),brontoCart=l,Cookies.set(_this.brontoCartCookieName,l)}else n=app.API.parseAjaxErrorMessage(e),$("#error-message-add-to-cart").html(n),c.addedToCartErrorElement.modal("show")}).fail(function(e){return console.log(e)}).always(function(){return t.button("reset")});