goog.provide("mps.cornerstone.promoDrawer"),goog.require("mc.action"),goog.require("mc.creative"),goog.require("mc.display"),goog.require("mc.dom"),goog.require("mc.error"),goog.require("mc.event"),goog.require("mc.op"),goog.require("mc.ops.creative"),goog.require("mc.ops.slider"),goog.require("mc.slider"),goog.require("mc.state"),mps.cornerstone.promoDrawer.COOKIE="promoViewed",mps.cornerstone.promoDrawer.wrapper=null,mps.cornerstone.promoDrawer.init=((e,r,o,t,p,m,a,s,n,c,i,d,l,g,w,u,v,D,C,h,y,E,b,q,O)=>{mc.log.group("promoDrawer.init");const S="mt-promo-drawer";mps.cornerstone.promoDrawer.initWrappers(S,e,function(e){if(r){var f=mc.display.htmlStringToDocumentFragment(r);e.titleWrapper.appendChild(f)}document.body.appendChild(e.wrapper),mps.cornerstone.promoDrawer.wrapper=e.wrapper,mps.cornerstone.promoDrawer.createBodySlider(S,o,t,p,m,a,s,c||"page",g,w,u,v,D,C,h,y,E,b,q,O).insert(e.bodyWrapper,"last"),mc.event.bind(e.titleWrapper,"click",function(){mc.dom.toggleClass(e.wrapper,"mt-expanded")}),l&&l(e,n,c),i&&mc.ops.creative.insertJavascript(i,d)}),mc.log.groupEnd()}),mps.cornerstone.promoDrawer.initCollapseDelay=((e,r,o,t,p,m,a,s,n,c,i,d,l,g,w,u,v,D,C,h,y,E,b,q,O,S)=>{mc.log.group("mps.cornerstone.promoDrawer.initCollapseDelay");mps.cornerstone.promoDrawer.init(e,r,o,t,p,n,c,i,s,d,l,g,(e,r,o)=>{mc.event.bind(e.wrapper,"mouseenter mouseleave",()=>{mc.dom.toggleClass(e.wrapper,"mt-hovered")}),mc.event.bind(e.wrapper,"touchstart click",()=>{mc.dom.addClass(e.wrapper,"mt-touched")});const t=mps.cornerstone.promoDrawer.isCollapsedState(m,a);if(e.wrapper.className=t.state?"":"mt-expanded",r){const o=()=>{a&&!t.firstViewing||mc.dom.hasClass(e.wrapper,"mt-touched")||(mc.dom.hasClass(e.wrapper,"mt-hovered")||mc.dom.removeClass(e.wrapper,"mt-expanded"),mc.event.bind(e.wrapper,"mouseleave",()=>{mc.dom.hasClass(e.wrapper,"mt-touched")||(mc.dom.removeClass(e.wrapper,"mt-hovered"),mc.dom.removeClass(e.wrapper,"mt-expanded"))}))};mc.error.isolateTimeout(o,1e3*r)}},w,u,v,D,C,h,y,E,b,q,O,S),mc.log.groupEnd()}),mps.cornerstone.promoDrawer.initWrappers=((e,r,o)=>{mc.creative.appendCSS(r,()=>{if(!document.getElementById(e)){const r=document.createElement("div");r.id=e;const t=document.createElement("div");t.className="mt-title-wrapper",r.appendChild(t);const p=document.createElement("div");p.className="mt-body-wrapper",r.appendChild(p),o({wrapper:r,titleWrapper:t,bodyWrapper:p})}})}),mps.cornerstone.promoDrawer.createBodySlider=((e,r,o,t,p,m,a,s,...n)=>{n=n.filter(e=>!!e);const c=mc.slider.createBreakpointsObject(o),i=mc.ops.slider.createSlideElements(e+"-body",[...n]),d=mc.slider.createSettingsObject("horizontal",t,s||"page",c,void 0,void 0,void 0,!1,a,"push"),l=r||mc.slider.DEFAULT_TEMPLATE;return new mc.slider.Slider(e+"-body",i,d,void 0,void 0,l)}),mps.cornerstone.promoDrawer.isCollapsedState=function(e,r){const o=mc.state.get(mps.cornerstone.promoDrawer.COOKIE),t=o&&r||!o&&e,p=!o;return mc.state.set(mps.cornerstone.promoDrawer.COOKIE,"t"),{state:!!t,firstViewing:p}},mc.op.registerOperation("promoDrawer",mps.cornerstone.promoDrawer.init),mc.op.registerOperation("promoDrawerCollapseDelay",mps.cornerstone.promoDrawer.initCollapseDelay);